<button
  class="trigger-panel"
  nz-button
  tabindex="0"
  nz-popover
  [nzPopoverContent]="contentTemplate"
  nzPopoverPlacement="bottomRight"
  nzPopoverTrigger="click"
>
  <nz-icon class="trigger-panel-icon" [class.unread]="hasUnreadNotifications" nzType="bell" nzTheme="outline" />
</button>

<ng-template #contentTemplate>
  <div class="notifications-panel">
    <div class="notifications-panel-header">
      <span class="notifications-panel-header-title">{{ 'notifications.title' | translate }}</span>
    </div>

    <nz-divider></nz-divider>

    <div class="notifications-panel-content">
      @for (notification of notifications; track notification.id) {
        <div
          class="notifications-panel-content-item"
          [class.read]="notification.read"
          (click)="handleNotificationClick(notification)"
        >
          <div class="notifications-panel-content-item-unread-indicator">
            <span class="notifications-panel-content-item-unread-indicator-dot"></span>

            <span class="notifications-panel-content-item-unread-indicator-text">
              {{ (notification.read ? 'notifications.read' : 'notifications.new') | translate }}
            </span>
          </div>
          <span class="notifications-panel-content-item-title">{{ notification.title }}</span>
          <span class="notifications-panel-content-item-date">{{ notification.date | date: 'dd/MM/yyyy' }}</span>
        </div>
      }
    </div>
  </div>
</ng-template>
